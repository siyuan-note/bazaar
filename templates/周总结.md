.action{$ng_duration := (toDate "2006-01-02" "2020-12-28").Sub now}
.action{$weekhours:=mul 7 24}
.action{$duration:=sub 0 $ng_duration.Hours }
.action{$week := div $duration $weekhours}
.action{$today:= (now | date "2006-01")}
.action{$weekResult:= (list $today "Week" $week| join " ")}


## ğŸ“….action{$weekResult}



.action{/*ä»Šå¤©è·ç¦»å‘¨ä¸€æœ‰å‡ å¤©*/}
.action{$ng_week := (mod (div ((toDate "2006-01-02" "2021-06-28").Sub now).Hours 24) 7) }

.action{/*ç”¨äºrangeå¾ªç¯,è¡¨ç¤ºå¾ªç¯7æ¬¡, æ²¡ä»€ä¹ˆå®é™…æ„ä¹‰*/}
.action{$days := list "æ˜ŸæœŸå…­" "æ˜ŸæœŸäº”" "æ˜ŸæœŸå››" "æ˜ŸæœŸä¸‰" "æ˜ŸæœŸäºŒ" "æ˜ŸæœŸä¸€" "æ˜ŸæœŸå¤©"}


.action{/*å¾ªç¯ç”Ÿæˆæ˜ŸæœŸåˆ—è¡¨*/}
.action{/*ç”Ÿæˆå‘¨ä¸€æ—¥æœŸæ‰€éœ€è¦ä¿®æ­£çš„æ—¶é•¿*/}
.action{$monday:= mul 24 $ng_week}

{{{col
.action{range $index,$day:=$days}

.action{/*å¸ƒå±€*/}
.action{$setColum:= mod (add $index 1) 3 }
.action{if eq $setColum 1}
{{{
.action{end}


.action{/*è¿­ä»£ æ¯æ¬¡å¢åŠ 24*/}
.action{$after := mul 24 $index}
.action{/*åœ¨å‘¨ä¸€çš„åŸºç¡€ä¸Š,é™„åŠ çš„æ—¶é—´*/}
.action{$realdate:= add $monday $after}
.action{/*ç”Ÿæˆä»¥ h ä¸ºå•ä½çš„ å­—ç¬¦ä¸²*/}
.action{$result:=(list $realdate "h" | join "")}
.action{/*è·å–åˆ—è¡¨é¡¹*/}
.action{$days_list := now | date_modify $result  | date "2006-01-02"}
	
### .action{$days_list}  .action{last (slice (list "æ˜ŸæœŸä¸€" "æ˜ŸæœŸäºŒ" "æ˜ŸæœŸä¸‰" "æ˜ŸæœŸå››" "æ˜ŸæœŸäº”" "æ˜ŸæœŸå…­" "æ˜ŸæœŸæ—¥") 0 (add 1 $index ) )}

{{select * from blocks where name=".action{$days_list}" and content="Schedule" }}


.action{/*å¸ƒå±€*/}
.action{$setColum:= mod (add $index 1) 1 }
.action{if eq $setColum 2}
}}}
.action{else if eq $index 3}
}}}
.action{end}

.action{$index := add  $index 2}
.action{end}

}}}

### æ—¥æ€»ç»“æ±‡æ€»
{{SELECT * from blocks where type='h' and  content = 'âœä»Šæ—¥æ€»ç»“'}}